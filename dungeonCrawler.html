<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
</script>
</head>
<body>

<div id="gameMainPage">
	<table id="mainGameTable" style="margin:auto">
	<tr>
		<td id="screenLeftCell" style="width:300px; height:600px; border-style:solid">
			<table id="screenLeftTable">
				<tr>
					<td id="screenLeftTopCell" style="width:300px; height:100px; border-style:solid">
						<p>
							This is for Game title
						</p>
					</td>
				</tr>
				<tr>
					<td id="screenLeftCenterCell" style="width:300px; height:300px; border-style:solid">
						<p id="enemyList">
						</p>
					</td>
				</tr>
				<tr>
					<td id="screenLeftBottomCell" style="width:300px; height:200px; border-style:solid">
						<p>
							This is for load, save, etc
						</p>
					</td>
				</tr>
			</table>
		</td>

		<td id="screenCenter" style="width:600px; height:600px; border-style:solid">
			<table id="screenCenterTable">
				<tr>
					<td id="screenCenterTopCell" style="width:600px; height:450px; border-style:solid">
						<p id="eventText" style="width:600px; height:450px"></p>
					</td>
				</tr>
				<tr>
					<td id="screenCenterBottomCell" style="width:600px; height:150px; border-style:solid">
						<table id="buttonTable" style="margin:auto">
							<tr id="buttonRowOne">
								<td id="buttonRowOneCellOne">
									<button id="buttonR1C1" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Create Event
									</button>
								</td>
								<td id="buttonRowOneCellTwo">
									<button id="buttonR1C2" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
								<td id="buttonRowOneCellThree">
									<button id="buttonR1C3" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
								<td id="buttonRowOneCellFour">
									<button id="buttonR1C4" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
								<td id="buttonRowOneCellFive">
									<button id="buttonR1C5" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
							</tr>
							<tr id="buttonRowTwo">
								<td id="buttoneRowTwoCellOne">
									<button id="buttonR2C1" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
								<td id="buttoneRowTwoCellTwo">
									<button id="buttonR2C2" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
								<td id="buttoneRowTwoCellThree">
									<button id="buttonR2C3" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
								<td id="buttoneRowTwoCellFour">
									<button id="buttonR2C4" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
								<td id="buttoneRowTwoCellFive">
									<button id="buttonR2C5" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
							</tr>
							<tr id="buttonRowThree">
								<td id="buttonRowThreeCellOne">
									<button id="buttonR3C1" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
								<td id="buttonRowThreeCellTwo">
									<button id="buttonR3C2" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
								<td id="buttonRowThreeCellThree">
									<button id="buttonR3C3" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
								<td id="buttonRowThreeCellFour">
									<button id="buttonR3C4" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
								<td id="buttonRowThreeCellFive">
									<button id="buttonR3C5" style="border:ridge; background-color:#80aaff; border-radius:12px; padding-left:40px; padding-right:40px; padding-top:5px; padding-bottom:5px">
										Text
									</button>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>

		<td id="screenRight" style="width:300px; height:600px; border-style:solid">
			<table id="screenLeftTable">
				<tr>
					<td id="screenRightTopCell" style="width:300px; height:150px; border-style:solid">
						<p>This is for minimap</p>
					</td>
				</tr>
				<tr>
					<td id="screenRightCenterCell" style="width:300px; height:300px; border-style:solid">
						<p>Character Statistics:</br></br>
							Name: <div class="charName"></div></br>
							Level: <div class="charLevel"></div></br>
							XP: <div class="charXP"></div></br>
						</p>
					</td>
				</tr>
				<tr>
					<td id="screenRightBottomCell" style="width:300px; height:150px; border-style:solid">
						<p>This is for anything</p>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	</table>
</div>
<script>
$(document).ready(function(){
	updateCharacterStats();
	//If anything in this script is not correct, the document ready alert will not appear
	alert("Document Ready");
});

//This is the array containing all possible monster names
var monsterNameArray = ["Bat", "Spider", "Snake"]

var characterName = "testCharacter";
var characterLevel = 1;
var characterXP = 0;
var characterHP = -1;//set equation based on characterLevel
var characterAttack = -1;//set equation based on characterLevel
var characterDefence = -1;//set equation based on characterLevel
var characterX = 6;
var characterY = 6;
var currentRoom = null;
var currentEvent = null;

//updates character stats on the interface
function updateCharacterStats(){
	$('.charName').html(characterName.toString());
	$('.charLevel').html(characterLevel);
	$('.charXP').html(characterXP);	
}
//Entity constructor
function Entity(entityName, entityLevel){
	var name;
	var level;
	this.name = "";
	if(entityName == null){
		var numMonsterNames = monsterNameArray.length;
		var indexOffset = 1 / numMonsterNames;
		var index = 0;
		var randomMonsterNum = Math.random();
		while(randomMonsterNum > indexOffset){
			randomMonsterNum = randomMonsterNum - indexOffset;
			++index;
		}
		this.name=monsterNameArray[index];
	}
	else{
		this.name=entityName;
	}
	this.level = entityLevel - 1 + Math.round(2 * Math.random());
	this.HP = this.level + Math.round(.5 * this.level) + Math.round(2 * this.level * Math.random());
	this.attack = this.level + Math.round(.25 * this.level) + Math.round(4 * this.level * Math.random());
	this.defence = this.level + Math.round(.25 * this.level) + Math.round(4 * this.level * Math.random());
	
	//print entity info (This will need an if/else for character stat location)
	this.printInfo = function(){
		$("#enemyList").append("Name: " + this.name + "Level: " + this.level + " HP: " + this.HP + " Attack: " + this.attack + " Defence: " + this.defence + "<br>");
	}
}

//This is a class to create an event
function createEvent(){
	new EventEncounter(4);
}

//This is the floor constructor
function Floor(characterLevel)
{

function room(type, posX, posY)
{
  //properties
  this.type = type;
  this.neighbor = 0;
  this.x = posX;
  this.y = posY;
  this.filled =false;
  this.travel =false;
  this.doorN = false;
  this.doorS = false;
  this.doorE = false;
  this.doorW = false;
  //functions
  this.resolveDoors = function()
  {
    this.neighbor--;
    var threeCase = Math.floor((Math.random() * 3) + 1);
    switch(this.neighbor)
    {
        case 1:
          break;
        
        case 2:
          if(threeCase == 1 && this.doorN == false && this.y-1 >= 0)
            this.doorN = true;
          else if(threeCase == 2 && this.doorS == false && this.y+1 <= 10)
            this.doorS = true;
          else if(threeCase == 3 && this.doorE == false && this.x+1 <= 10)
            this.doorE = true;
          else if(this.doorW = false && this.x-1 >= 0)
            this.doorW = true;
          break; //end case 2
          
        case 3:
          var count = 0;
          if (this.doorN == false && this.y-1 >=0)
          {
            this.doorN = true;
            count++;
          }
          if (this.doorS == false && this.y+1 <=10)
          {
            this.doorS = true;
            count++;
          }
          if (this.doorE == false && this.x+1 <=10 && count != 2)
          {
            this.doorE = true;
            count++;
          }
          if (this.doorW == false && this.x-1 >=10 && count != 2)
          {
            this.doorW = true;
          }
          break; //end case 3
          
        case 4:
          this.doorN = true;
          this.doorS = true;
          this.doorE = true;
          this.doorW = true;
          if(y-1 >= 0)
            this.doorN = false;
          if(y+1 <= 10)
            this.doorS = false;
          if(x+1 <= 10)
            this.doorE = false;
          if(x-1 >= 0)
            this.doorW = false;
          break; //end case 3
        
        default:
          break;
    }//switch grow
    this.neighbor++;
    return true;
  }//resolveDoor
}//room class



var map = new Array(11);
var charLv = 6;
var floorLv = 10;
for(var x = 0; x < 11; x++)
{
  map[x] = new Array(11); //makes a 2d array
}//2d map array creation loop
for(var i = 0; i < 11; i++)
{
  for(var j = 0; j < 11; j++)
  {
    map[i][j] = new room("empty", i, j)
  }
}
  map[5][5] = 
  {
    type: "start",
    neighbor: 0,
    x: 5, y: 5, isOccupied: true,
    doorN: false, doorS: false, doorW: false, doorE: false,
    resolveStart: function()
    {
      var fourCase = Math.floor((Math.random() * 4) + 1);
      var sixCase =  Math.floor((Math.random() * 6) + 1);
      switch(this.neighbor)
      {
        case 1:
          if(fourCase == 1)
            this.doorN = true;
          else if(fourCase == 2)
            this.doorE = true;
          else if(fourCase == 3)
            this.doorS = true;
          else if(fourCase == 4)
            this.doorW = true;
          break; //end case 1
          
        case 2:
          if(sixCase == 1)
          {
            this.doorN = true;
            this.doorS = true;
          }
          else if(sixCase == 2)
          {
            this.doorE = true;
            this.doorW = true;
          }
          else if(sixCase == 3)
          {
            this.doorN =true;
            this.doorE =true;
          }
          else if(sixCase == 4)
          {
            this.doorS =true;
            this.doorE =true;
          }
          else if(sixCase == 5)
          {
            this.doorS =true;
            this.doorW =true;
          }
          else if(sixCase == 6)
          {
            this.doorN =true;
            this.doorW =true;
          }
          break; //end case 2
          
        case 3:
          if(fourCase == 1)
          {
            this.doorE = true;
            this.doorS = true;
            this.doorW = true;
          }
          else if(fourCase == 2)
          {
            this.doorN = true;
            this.doorS = true;
            this.doorW = true;
          }
          else if(fourCase == 3)
          {
            this.doorN = true;
            this.doorE = true;
            this.doorW = true;
          }
          else if(fourCase == 4)
          {
            this.doorN = true;
            this.doorE = true;
            this.doorS = true;
          }
          break; //end case 3
          
        case 4:
          this.doorN = true;
          this.doorE = true;
          this.doorS = true;
          this.doorW = true;
          break;
        default:
          break;
      }//switch neighbors
      
    }//resolveStart function
     }//starting room properties
  map[5][5].neighbor = Math.floor((Math.random() * 4) + 1);
  map[5][5].resolveStart();
  var totalRoom = (charLv * floorLv)/Math.abs(floorLv-charLv-1) + 5;
  var currentRoom = 1
  var x = 5;
  var x = 5;
  
var getMapRooms = function(currentRoom, trackX, trackY)
{
  while (currentRoom < totalRoom)
  {
    if(map[trackX][trackY].travel == false && map[trackX][trackY].neighbor!= 0 )
    {
      if(map[trackX][trackY].doorN == true && trackY-1 >= 0 && !(map[trackX][trackY-1].filled))
      {
        map[trackX][trackY-1].type = "normal";
        map[trackX][trackY-1].x = trackX;
        map[trackX][trackY-1].y = trackY-1;
        map[trackX][trackY-1].filled = true;
        map[trackX][trackY-1].doorS = true;
        map[trackX][trackY-1].neighbor += (1 + Math.floor((Math.random() * 3) + 1))
        map[trackX][trackY-1].resolveDoors();
        currentRoom++;
        getMapRooms(currentRoom, trackX, trackY-1)
      }//if north has room
    
      if(map[trackX][trackY].doorS == true && trackY+1 <= 10 && !(map[trackX][trackY+1].filled))
      {
        map[trackX][trackY+1].type = "normal";
        map[trackX][trackY+1].x = trackX;
        map[trackX][trackY+1].y = trackY+1;
        map[trackX][trackY+1].filled = true;
        map[trackX][trackY+1].doorN = true;
        map[trackX][trackY+1].neighbor += (1 + Math.floor((Math.random() * 3) + 1))
        map[trackX][trackY-1].resolveDoors();
        currentRoom++;
      }//if south has room
    
      if(map[trackX][trackY].doorE == true && trackX+1 <= 10 && !(map[trackX+1][trackX].filled))
      {
        map[trackX+1][trackY].type = "normal";
        map[trackX+1][trackY].x = trackX+1;
        map[trackX+1][trackY].y = trackY;
        map[trackX+1][trackY].filled = true;
        map[trackX+1][trackY].doorW = true;
        map[trackX+1][trackY].neighbor += (1 + Math.floor((Math.random() * 3) + 1))
        map[trackX][trackY-1].resolveDoors();
        currentRoom++;
      }//if east has rooms
    
      if(map[trackX][trackY].doorW == true && trackX-1 >= 0 && !(map[trackX-1][trackY].filled))
      {
        map[trackX-1][trackY].type = "normal";
        map[trackX-1][trackY].x = trackX-1;
        map[trackX-1][trackY].y = trackY;
        map[trackX-1][trackY].filled = true;
        map[trackX-1][trackY].doorE = true;
        map[trackX-1][trackY].neighbor += (1 + Math.floor((Math.random() * 3) + 1))
        map[trackX][trackY-1].resolveDoors();
        currentRoom++;
      }//if west has rooms
      map[trackX][trackY].travel = true;
    }//road less traveled.
  }//while roombuilding
}//function to start build nightmares.

}//floor function

//This is the room constructor
function Room(characterLevel){
	this.event = new EventEncounter(characterLevel);
}

//This is the encounter event constructor
function EventEncounter(numMonsters){
	alert("Creating new encounter event." + numMonsters)
	var monsterArray = [];
	for(var i=0; i<numMonsters; ++i){
		monsterArray.push(new Entity(null, characterLevel));
	}
	for(var j=0; j<monsterArray.length; ++j){
		monsterArray[j].printInfo();
	}
}

document.getElementById("buttonR1C1").onclick = function() {createEvent()};
</script>

</body>
</html>